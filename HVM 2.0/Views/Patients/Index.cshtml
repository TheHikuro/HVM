@model HVM_2._0.Models.all


@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<form method="post" action="/Patients/Index">
    <select name="CreneauxPris">
        @{  int idPatient = 0 ;
            String nomVisiteur = null;
            String prenomVisiteur = null;
            foreach (var item in Model.crenaux)
            {
                foreach (var usr in Model.patients)
                {
                    if (Session["p_Patient"].ToString() == usr.login.Trim())
                    {
                        idPatient = usr.id_patient;
                    }
                }

                foreach(var res in Model.reserves)
                {
                    if (res.id_Creneau == item.id_creneau)
                    {
                        foreach(var vis in Model.visiteurs)
                        {
                            if(res.id_Visiteur == vis.id_Visiteur)
                            {
                                prenomVisiteur = vis.prenom;
                                nomVisiteur = vis.nom;
                            }
                        }
                    }
                }

                if (item.id_patient == idPatient && item.reserve == true)
                {
                <option>@item.date | par @prenomVisiteur @nomVisiteur</option>
                }
            }
        }

    </select>
    <input type="submit" class="btn btn-default" name="accept" value="Accept" />
    <input type="submit" class="btn btn-default" name="refus" value="Decline" />
</form>

<table>

</table>